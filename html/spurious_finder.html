<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Spurious interactif — architecture_verif</title>

<link rel="stylesheet" href="../style/spurious_finder.css">
</head>
<body data-theme="dark">

<!-- header: title left, lang selector right (theme fixed dark) -->
<div class="header">
  <div class="title-block">
    <div class="title-row">
      <a id="btnHome" class="home-btn" href="../index.html">HUB</a>
      <h1 data-i18n="title">Spurious — outil interactif</h1>
    </div>
  </div>
</div>


<div class="layout">
      <!-- TOP LEFT : paramètres + petit mixeur -->
      
      <div class="card params">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <!-- Bloc titre -->
      <div>
        <strong data-i18n="params_title">Paramètres</strong>
        <div class="small" data-i18n="params_sub">Saisir les plages / bornes</div>
      </div>

      <!-- Boutons à droite -->
      <div class="actions" style="display:flex;gap:8px;">
        <button id="reset_params" class="btn-ghost" data-i18n="reset_btn">Réinitialiser</button>
        <button id="clear_params" class="btn-ghost" data-i18n="clear_all">Vider</button>
      </div>
    </div>


    <div style="margin-top:8px" class="compact">
      <div class="row" style="margin-bottom:8px">
        <label data-i18n="rf_range">Plage RF (MHz) :</label>
        <input id="rf_min" type="number" value="6000" placeholder="min"> →
        <input id="rf_max" type="number" value="18000" placeholder="max">
      </div>

      <div class="row" style="margin-bottom:8px">
        <label data-i18n="ol_fixed">OL fixe (MHz) :</label>
        <input id="ol" type="number" value="10000" placeholder="OL">
      </div>

      <div class="row" style="margin-bottom:8px">
        <label data-i18n="mode_label">Mode :</label>
        <select id="mode" style="width:180px">
          <option value="supradyne">supradyne (OL &gt; RF)</option>
          <option value="infradyne">infradyne (OL &lt; RF)</option>
        </select>
      </div>

      <div class="row" style="margin-bottom:8px">
        <label data-i18n="fi_range">Plage FI (MHz) :</label>
        <input id="fi_min" type="number" value="3500" placeholder="min"> →
        <input id="fi_max" type="number" value="4500" placeholder="max">
      </div>

      <div class="row" style="margin-bottom:8px">
        <label data-i18n="m_max">m_max (±) :</label>
        <input id="m_max" type="number" value="3" min="0" max="30" style="width:96px">
        <label style="min-width:78px;margin-left:8px" data-i18n="n_max">n_max (±) :</label>
        <input id="n_max" type="number" value="3" min="0" max="30" style="width:96px">
      </div>
    </div>

    <!-- petit schéma mixeur -->
    <div style="margin-top:12px">
  <svg width="100%" height="120" viewBox="0 0 360 120" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="mixTitleSmall">
    <title id="mixTitleSmall">Mini schéma mixeur</title>
    <defs>
      <marker id="arrowSmall" markerWidth="8" markerHeight="8" refX="6" refY="4" orient="auto">
        <path d="M0,0 L8,4 L0,8 z" fill="#666"/>
      </marker>
    </defs>

    <!-- RF left -->
    <rect x="12" y="18" width="64" height="28" rx="6" class="svg-rf"/>
    <text x="44" y="36" font-size="12" text-anchor="middle" fill="var(--text)">RF</text>
    <line x1="76" y1="32" x2="112" y2="32" stroke="#888" stroke-width="2" marker-end="url(#arrowSmall)"/>

    <!-- MIX center -->
    <g>
      <circle cx="148" cy="32" r="28" fill="var(--mono-bg)" stroke="var(--panel-border)"/>
      <line x1="132" y1="16" x2="164" y2="48" stroke="#c33" stroke-width="2.5"/>
      <line x1="164" y1="16" x2="132" y2="48" stroke="#c33" stroke-width="2.5"/>
    </g>

    <!-- FI right -->
    <line x1="176" y1="32" x2="212" y2="32" stroke="#888" stroke-width="2" marker-end="url(#arrowSmall)"/>
    <rect x="212" y="20" width="64" height="28" rx="6" class="svg-fi"/>
    <text x="244" y="38" font-size="12" text-anchor="middle" fill="var(--text)">FI</text>

    <!-- OL bottom -->
    <rect x="116" y="88" width="64" height="22" rx="6" class="svg-ol"/>
    <text x="148" y="104" font-size="11" text-anchor="middle" fill="var(--text)">OL</text>
    <line x1="148" y1="88" x2="148" y2="60" stroke="#888" stroke-width="2" marker-end="url(#arrowSmall)"/>
  </svg>
</div>

  </div>

  <!-- BOTTOM LEFT : table 5x6 -->
  <div class="card power-table">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
      <div>
        <strong data-i18n="table_title">Table puissances spurious (dBc) — 5×6</strong>
        <div class="small" data-i18n="table_hint">m = 1..5, n = 0..5</div>
      </div>
      <div class="actions">
        <button id="reset_table" class="btn-ghost" data-i18n="reset_table">Réinitialiser</button>
        <button id="clear_table" class="btn-ghost" data-i18n="clear_table">Vider</button>
        <button id="download_csv" class="btn" data-i18n="download_csv">Télécharger CSV</button>
      </div>
    </div>

    <div style="overflow:auto;max-height:calc(72vh - 160px)">
      <table id="power_table" aria-label="table puissance spurious"></table>
    </div>

    <div style="margin-top:8px" class="hint" data-i18n="table_note">
      Si une cellule est vide, la puissance n'est pas disponible pour ce couple (m,n).
    </div>
  </div>

  <!-- RIGHT (full height) : résultats -->
  <div class="card results">
    <h3 style="margin:0 0 8px" data-i18n="results_title">Résultats (tous couples)</h3>
    <div id="summary" class="small muted" style="margin-bottom:8px" data-i18n="no_calc">Aucun calcul</div>

    <div id="spurious_list" style="font-size:13px;line-height:1.25;"></div>

    <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
      <button id="download_report_right" class="btn" data-i18n="download_report">Télécharger rapport</button>
      <button id="copy_report_right" class="btn-ghost" data-i18n="copy_report">Copier</button>
    </div>

    <div style="margin-top:12px" class="small" data-i18n="author">Auteur : <strong>François Bordas</strong> — <a href="mailto:francois.bordas@etu.univ-amu.fr">francois.bordas@etu.univ-amu.fr</a></div>
  </div>
</div>

<script src="../javascript/spurious_finder.js" defer></script>
</body>
</html>
